{"version":3,"file":"oscd-open.js","sources":["../../oscd-open.ts"],"sourcesContent":["import { html, LitElement, nothing } from 'lit';\nimport { query } from 'lit/decorators.js';\n\nimport '@material/mwc-textfield';\n\nimport { newOpenEvent } from '@openscd/open-scd-core';\nimport { show } from './foundation.js';\n\nexport default class OscdOpen extends LitElement {\n  @query('input')\n  input!: HTMLInputElement;\n\n  async run() {\n    this.input.click();\n  }\n\n  async openDoc(event: Event): Promise<void> {\n    const file = (<HTMLInputElement | null>event.target)?.files?.item(0);\n    if (!file) return;\n\n    const text = await file.text();\n    const docName = file.name;\n    const doc = new DOMParser().parseFromString(text, 'application/xml');\n\n    this.dispatchEvent(newOpenEvent(doc, docName));\n    this.input.onchange = null;\n  }\n\n  render() {\n    return html`${show()\n        ? html`<mwc-textfield label=\"open\" value=\"some\"></mwc-textfield>`\n        : nothing}\n      <input\n        @click=${({ target }: MouseEvent) => {\n          // eslint-disable-next-line no-param-reassign\n          (<HTMLInputElement>target).value = '';\n        }}\n        @change=${this.openDoc}\n        type=\"file\"\n      /> `;\n  }\n}\n"],"names":["LitElement","html","query"],"mappings":";;;;;;;;;AAQqB,MAAA,QAAS,SAAQA,CAAU,CAAA;AAI9C,IAAA,MAAM,GAAG,GAAA;AACP,QAAA,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC;KACpB;IAED,MAAM,OAAO,CAAC,KAAY,EAAA;;AACxB,QAAA,MAAM,IAAI,GAAG,CAAA,EAAA,GAAA,CAAA,EAAA,GAA0B,KAAK,CAAC,MAAO,MAAE,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,EAAA,CAAA,KAAK,MAAE,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,EAAA,CAAA,IAAI,CAAC,CAAC,CAAC,CAAC;AACrE,QAAA,IAAI,CAAC,IAAI;YAAE,OAAO;AAElB,QAAA,MAAM,IAAI,GAAG,MAAM,IAAI,CAAC,IAAI,EAAE,CAAC;AAC/B,QAAA,MAAM,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC;AAC1B,QAAA,MAAM,GAAG,GAAG,IAAI,SAAS,EAAE,CAAC,eAAe,CAAC,IAAI,EAAE,iBAAiB,CAAC,CAAC;QAErE,IAAI,CAAC,aAAa,CAAC,YAAY,CAAC,GAAG,EAAE,OAAO,CAAC,CAAC,CAAC;AAC/C,QAAA,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG,IAAI,CAAC;KAC5B;IAED,MAAM,GAAA;AACJ,QAAA,OAAOC,CAAI,CAAA,CAAG,EACRA,CAAI,CAAA,CAA2D,yDAAA,CAAA;AACjE,YAAS,CAAA;;AAEA,eAAA,EAAA,CAAC,EAAE,MAAM,EAAc,KAAI;;AAEf,YAAA,MAAO,CAAC,KAAK,GAAG,EAAE,CAAC;SACvC,CAAA;AACS,gBAAA,EAAA,IAAI,CAAC,OAAO,CAAA;;UAEpB,CAAC;KACR;AACF,CAAA;AA/BC,UAAA,CAAA;IADCC,CAAK,CAAC,OAAO,CAAC;AACU,CAAA,EAAA,QAAA,CAAA,SAAA,EAAA,OAAA,EAAA,KAAA,CAAA,CAAA;;;;"}